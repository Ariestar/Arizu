# ç»Ÿä¸€è®°å¿†ç³»ç»Ÿ - å¿«é€Ÿå‚è€ƒ

## ğŸ¯ æ ¸å¿ƒæ¦‚å¿µ

**ç›®æ ‡**ï¼šå°†ä¸‰ä¸ªç‹¬ç«‹çš„è®°å¿†ç³»ç»Ÿæ•´åˆä¸ºç»Ÿä¸€çš„è®°å¿†æ£€ç´¢æ¥å£

```
Mnemosyne (å¯¹è¯è®°å¿†) + Knowledge Base (çŸ¥è¯†åº“) + Self Learning (å­¦ä¹ è®°å¿†)
                    â†“
            ç»Ÿä¸€è®°å¿†åè°ƒå™¨
                    â†“
            æ™ºèƒ½èåˆä¸æ’åº
                    â†“
            ç»Ÿä¸€ç»“æœè¿”å›
```

## ğŸ“¦ æ ¸å¿ƒç»„ä»¶

### 1. MemoryCoordinatorï¼ˆåè°ƒå™¨ï¼‰
- ç®¡ç†æ‰€æœ‰è®°å¿†é€‚é…å™¨
- åè°ƒå¹¶è¡Œæ£€ç´¢
- ç»“æœåˆå¹¶ä¸æ’åº

### 2. MemoryAdapterï¼ˆé€‚é…å™¨ï¼‰
- `MnemosyneAdapter` - å°è£… Mnemosyne æ¥å£
- `KnowledgeBaseAdapter` - å°è£… Knowledge Base æ¥å£  
- `SelfLearningAdapter` - å°è£… Self Learning æ¥å£

### 3. ResultMergerï¼ˆåˆå¹¶å¼•æ“ï¼‰
- å»é‡ï¼ˆç›¸ä¼¼åº¦é˜ˆå€¼ 0.85ï¼‰
- è¯„åˆ†èåˆï¼ˆå¤šç»´åº¦åŠ æƒï¼‰
- æ’åºï¼ˆç›¸å…³æ€§ + é‡è¦æ€§ + æ—¶é—´ï¼‰

## ğŸ”Œ æ ¸å¿ƒæ¥å£

```python
# ç»Ÿä¸€æ£€ç´¢
results = await coordinator.search_all(
    query="ç”¨æˆ·é—®é¢˜",
    event=event,
    total_top_k=10
)

# æ·»åŠ è®°å¿†
await coordinator.add_memory_to_all(
    content="è®°å¿†å†…å®¹",
    event=event
)
```

## âš™ï¸ é…ç½®è¦ç‚¹

```json
{
  "systems": {
    "mnemosyne": {"enabled": true, "weight": 1.0},
    "knowledge_base": {"enabled": true, "weight": 0.8},
    "self_learning": {"enabled": true, "weight": 0.6}
  },
  "merging": {
    "strategy": "weighted_fusion",
    "max_results": 10
  }
}
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
astrbot_plugin_unified_memory/
â”œâ”€â”€ main.py              # æ’ä»¶å…¥å£
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ coordinator.py   # åè°ƒå™¨
â”‚   â””â”€â”€ result_merger.py # åˆå¹¶å¼•æ“
â”œâ”€â”€ adapters/            # é€‚é…å™¨å®ç°
â””â”€â”€ models/              # æ•°æ®æ¨¡å‹
```

## ğŸš€ å®æ–½æ­¥éª¤

1. **åˆ›å»ºæ’ä»¶æ¡†æ¶** â†’ å®šä¹‰æ¥å£å’Œæ¨¡å‹
2. **å®ç°é€‚é…å™¨** â†’ é€ä¸ªå°è£…å„ç³»ç»Ÿ
3. **å®ç°åè°ƒå™¨** â†’ å¹¶è¡Œæ£€ç´¢å’Œåˆå¹¶
4. **é›†æˆåˆ°æµç¨‹** â†’ æ›¿æ¢ç°æœ‰è®°å¿†æ³¨å…¥
5. **æµ‹è¯•ä¼˜åŒ–** â†’ æ€§èƒ½å’Œå‡†ç¡®æ€§æµ‹è¯•

## â±ï¸ æ—¶é—´ä¼°ç®—

- **åŸºç¡€æ¡†æ¶**: 1-2å‘¨
- **é€‚é…å™¨å®ç°**: 2-3å‘¨
- **é›†æˆä¼˜åŒ–**: 1-2å‘¨
- **æ€»è®¡**: 4-7å‘¨

## ğŸ“– è¯¦ç»†æ–‡æ¡£

æŸ¥çœ‹ `memory_unification_plan.md` è·å–å®Œæ•´è®¾è®¡æ–‡æ¡£ã€‚


